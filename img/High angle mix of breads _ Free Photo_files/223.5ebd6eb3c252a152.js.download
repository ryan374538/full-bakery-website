!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="acac48a6-c7c5-45d5-bda8-b84e3a50fbfb",e._sentryDebugIdIdentifier="sentry-dbid-acac48a6-c7c5-45d5-bda8-b84e3a50fbfb")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{29085:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});let r=(0,n(52983).createContext)(null)},20339:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(97458),l=n(65122),i=n(52983),s=n(29085);let a=e=>{let{children:t,thumbnailHeight:n}=e,[a,c]=(0,i.useState)(!1),o=(0,l.e)(),u=(0,i.useCallback)(()=>{o||n<90||c(!0)},[o,n]),d=(0,i.useCallback)(()=>{c(!1)},[]),f=(0,i.useMemo)(()=>({attributionEnabled:a,showAttribution:u,hideAttribution:d,thumbnailHeight:n}),[a,d,u,n]);return(0,i.useEffect)(()=>{a&&setTimeout(()=>{d()},15e3)},[a,d]),(0,r.jsx)(s.Q.Provider,{value:f,children:t})}},5044:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(87420),l=n(63202);let i=async(e,t)=>(0,l.c)("/api/user/files/open?reference=".concat(e),"GET",void 0,{locale:t}),s=e=>{let{locale:t}=(0,r.Vx)();return{openFile:async()=>{let n=await i(e,t);return n.success&&window.location.assign(n.data.url),!1}}}},30223:function(e,t,n){"use strict";n.r(t),n.d(t,{FileThumbnail:function(){return ep}});var r=n(97458),l=n(23113),i=n(87420),s=n(47723),a=n(10893),c=n(52983),o=n(8481),u=n(10747);let d=(0,c.createContext)({});var f=n(25288),h=n(19170),m=n(17995),v=n(49990),x=n(81722),p=n(39155),y=n(57869),j=n(68588),g=n(7616),w=n(53655),b=n(83795);let k=()=>{let{locale:e}=(0,i.Vx)(),[,t]=(0,g.KO)(b.M);return{refetchFiles:(0,c.useCallback)(async()=>{let n=await (0,w.v)({locale:e});n.success&&t(n.data)},[e,t])}},C=(e,t)=>{let n=(0,c.useRef)(null),[r,l]=(0,c.useState)(!1),[s,o]=(0,c.useState)(!1),{createQueryKey:u}=(0,x.K)(),{refetchFiles:d}=k(),{openToast:g}=(0,h.x_)(),{t:w}=(0,a.$G)("error"),b=(0,i.Vx)().locale,C=(0,y.Z)(),{setIsBlockedMultiSelect:$}=(0,p.q)(),N=(0,f.NL)(),{folderReferenceWorkspace:R,isRootFolder:T}=(0,v.I)(),{isTrash:I}=(0,m.G)();(0,c.useEffect)(()=>{r&&n.current&&setTimeout(()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()},0)},[r]);let D=(0,c.useCallback)(async()=>{if(s||!n.current)return;t||C("renameProjects");let r=n.current.value.trim();0!==r.length&&(o(!0),(await (0,j.O)({name:r,reference:e,folderReference:t?null:R,locale:b})).success?(t&&d(),N.setQueryData(u("files",R),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.map(t=>t.reference===e?{...t,name:r}:t)}})):g({type:"danger",message:w("unknown")}),o(!1),l(!1),$(!1))},[s,C,e,R,b,$,t,N,u,d,g,w]);return{inputRef:n,isRenaming:r,renameFile:D,activateRename:(0,c.useCallback)(()=>{I||T||(l(!0),$(!0))},[T,I,$])}};var $=n(71280),N=n(30260),R=n(95498),T=n(76381),I=n(98674),D=n(1303),F=n(5953),M=n(66079),S=n(770),_=n(11569),E=n(19213),P=n(40499),J=n(19059),Z=n(3506);let G=()=>(0,c.useContext)(d);var O=n(42124),Q=n(46444),V=n(63202);let A=async e=>(0,V.c)("/api/user/files?reference=".concat(e),"DELETE");var K=n(51780),H=n(49058),U=n(13022);let q=async e=>(0,V.c)("/api/user/files/restore".concat((0,U.T)({reference:e})),"POST"),B="/user/projects",L=e=>{let{createQueryKeyTrash:t,createQueryKey:n}=(0,x.K)(),{folderReferenceWorkspace:l}=(0,v.I)(),{openToast:i}=(0,h.x_)(),{pathname:s,push:o}=(0,K.useRouter)(),u=(0,f.NL)(),{setIsTrash:d}=(0,m.G)(),p=(0,c.useCallback)(e=>{e.preventDefault(),s===B?d(!1):o(B)},[s,o,d]);return{restoreFile:(0,c.useCallback)(async()=>{try{var s,c;let o=await q(e),d=null!==(c=u.getQueryData(t("files")))&&void 0!==c?c:{files:[]},f=null==d?void 0:null===(s=d.files)||void 0===s?void 0:s.find(t=>t.reference===e);if(!o.success)throw Error("Restore request failed");return u.setQueryData(t("files"),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.filter(t=>t.reference!==e)}}),u.setQueryData(n("files",l),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return f?{...e,files:[...e.files,f]}:e}),i({type:"success",title:"",message:(0,r.jsx)(a.cC,{i18nKey:"projects:toast.restore",values:{type:"file"},components:{1:(0,r.jsx)(H.P,{onClick:p})}}),duration:4e3}),!0}catch(e){return!1}},[e,u,t,n,l,i,p])}},W=(e,t)=>{let{createQueryKey:n,createQueryKeyTrash:r}=(0,x.K)(),l=(0,f.NL)(),i=(0,c.useRef)([]),{restoreFile:s}=L(e),{folderReferenceWorkspace:o}=(0,v.I)(),u=n("files",o),d=r("files"),{refetchFiles:m}=k(),{openToast:p}=(0,h.x_)(),{t:y}=(0,a.$G)(["error","projects"]);return{deleteFile:async()=>{try{if(i.current=[],!(await A(e)).success)throw Error("Delete request failed");return t&&m(),l.setQueryData(u,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]},n=t.files.filter(t=>t.reference!==e||(i.current.push(t),!1));return{...t,files:n}}),l.setQueryData(d,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...e,files:[...e.files,...i.current]}}),!0}catch(e){return p({type:"danger",message:y("error:unknown")}),!1}},undoDeleteFile:async()=>{try{if(!await s())throw Error("Restore request failed");return t&&m(),l.setQueryData(d,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.filter(t=>t.reference!==e)}}),l.setQueryData(u,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...e,files:[...e.files,...i.current]}}),i.current=[],!0}catch(e){return p({type:"danger",message:y("error:unknown")}),!1}}}},z=async(e,t)=>(0,V.c)("/api/user/files/download?reference=".concat(e),"GET",void 0,{locale:t}),Y=e=>{let{locale:t}=(0,i.Vx)();return{donwloadFile:async()=>{let n=await z(e,t);return n.success&&window.location.assign(n.data.url),!1}}},X=async(e,t)=>(0,V.c)("/api/user/files/edit?reference=".concat(e),"GET",void 0,{locale:t}),ee=e=>{let{locale:t}=(0,i.Vx)();return{editFile:async()=>{let n=await X(e,t);return n.success&&window.location.assign(n.data.url),!1}}},et=e=>{let{onActivateRename:t,location:n,onShowMoveToFolderModal:l,isHome:i,hasVideo:s}=e,{reference:c}=G(),{t:o}=(0,a.$G)("projects"),d=(0,u.n)(),{deleteFile:f,undoDeleteFile:h}=W(c,i),m=(0,O.L)(),{editFile:v}=ee(c),{donwloadFile:x}=Y(c);return(0,r.jsxs)(r.Fragment,{children:[!s&&(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:()=>{d({interactionType:"edit",location:n,type:"file"}),v()},"data-cy":"editOnLineAction",children:[(0,r.jsx)(S.J,{as:_.Z,className:"text-surface-foreground-0"}),o("actions.edit")]})}),(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:()=>{t(),d({interactionType:"rename",location:n,type:"file"})},"data-cy":"renameAction",children:[(0,r.jsx)(S.J,{as:J.Z})," ",o("actions.rename")]})}),"my_profile"===n&&(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:()=>{l(!0),d({interactionType:"move_to_folder",location:"my_profile",type:"file"})},"data-cy":"moveToFolderAction",children:[(0,r.jsx)(S.J,{as:P.Z})," ",o("moveToFolderModal.title")]})}),(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:()=>{d({interactionType:"download",location:n,type:"file"}),x()},"data-cy":"downloadAction",children:[(0,r.jsx)(S.J,{as:E.Z})," ",o("actions.download")]})}),(0,r.jsx)("span",{"aria-hidden":"true",className:Q.jv}),(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:()=>{m({deleteProject:()=>f(),undoDeleteProject:()=>h()}),d({interactionType:"delete",location:n,type:"file"})},"data-cy":"sendToTrashAction",children:[(0,r.jsx)(S.J,{as:Z.Z})," ",o("actions.delete")]})})]})};var en=n(74329),er=n(54112),el=n(55763);let ei=()=>{let{reference:e}=G(),{restoreFile:t}=L(null!=e?e:""),n=(0,er.Y)(),{t:l}=(0,a.$G)("projects"),[i,s]=(0,c.useState)(!1),o=()=>{s(e=>!e)},u=(0,c.useCallback)(async()=>{await t()},[t]),d=(0,c.useCallback)(async()=>{await n({filesReference:e?[e]:[],foldersReference:[]})},[n,e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:u,"data-cy":"actionRestore",children:[(0,r.jsx)(S.J,{as:en.Z})," ",l("actions.restore")]})}),(0,r.jsx)("li",{className:Q.iJ,children:(0,r.jsxs)("button",{className:Q.UP,onClick:o,"data-cy":"actionsPurge",children:[(0,r.jsx)(S.J,{as:Z.Z})," ",l("actions.purge")]})}),i&&(0,r.jsx)(el.W,{onShowModal:o,showModal:i,onPurge:d})]})};n(35619);var es=n(5044);let ea=e=>{let{children:t,type:n,refMulti:l}=e,{reference:i}=G(),{setIsBlockedMultiSelect:s,hoverFilesReferenceController:a,selectFilesReferenceController:o,selectedItemsRef:u,multiSelectController:d,selectFilesReference:f}=(0,p.q)(),h=(0,c.useCallback)(()=>{d&&d.deselectAll()},[d]),{openFile:m}=(0,es.C)(i);return"trash"===n?t:(0,r.jsx)("a",{onClick:()=>m(),className:"_1y5m5s10 $cursor-pointer $relative",draggable:"true",onDrag:()=>{o&&(s(!0),!f.has(i)&&(h(),o.replaceItemsReference(new Set([i])),a.replaceItemsReference(new Set([i])),l&&u.current.add(l.current)))},onDragEnd:()=>{s&&setTimeout(()=>{s(!1)},50)},children:t})},ec=e=>"designer"===e?"design":"mockup-editor"===e?"mockup":"aiImage";var eo=n(60928),eu=n(21623);let ed={aiImage:n(27488).Z,mockup:eu.Z,design:eo.Z};n(19882);let ef=e=>{let{origin:t}=e,{t:n}=(0,a.$G)("projects"),l=ec(t),i=ed[l];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.J,{as:i,className:"_5mej6y0"}),n("types.".concat(l))]})};var eh=n(20339),em=n(28851),ev=n(32490);let ex=e=>{let{poster:t,videoSrc:n,duration:l,name:i,height:s}=e,a=(0,c.useRef)(null),o=(0,ev.R)({containerRef:a,threshold:[0,1]});return(0,r.jsx)(eh.l,{thumbnailHeight:s,children:(0,r.jsx)("article",{className:"$bg-surface-1 $rounded $w-full $h-full $flex $items-center $justify-center $p-10",ref:a,children:(0,r.jsx)(em.VideoContentComponent,{poster:t,videoSrc:n,duration:l,name:i,isInViewport:o})})})},ep=e=>{var t,n,f,h,m,v,x,y,j,g,w,b,k,S,_,E,P,J,Z;let{fileUnity:G,type:O,popoverOrientation:Q="right",refToObserve:V,isHome:A=!1,itemRef:K}=e,{inputRef:H,isRenaming:U,activateRename:q,renameFile:B}=C(null!==(b=G.reference)&&void 0!==b?b:"",A),{t:L}=(0,a.$G)("projects"),[W,z]=(0,c.useState)(!1),Y=(0,u.n)(),[X,ee]=(0,c.useState)(!1),[en,er]=(0,c.useState)(null!==(t=G.thumbnail)&&void 0!==t&&!!t.url),el=!!(null==G?void 0:null===(n=G.meta)||void 0===n?void 0:n.url),es=(0,l.a)("mdMax"),ec=(0,p.q)(),eo=!(ec&&0===Object.keys(ec).length),eu=null==ec?void 0:null===(f=ec.hoverFilesReference)||void 0===f?void 0:f.has(G.reference),ed=null==ec?void 0:null===(h=ec.selectFilesReference)||void 0===h?void 0:h.has(G.reference),eh=!(null==ec?void 0:ec.isSelectMode)&&!(null==ec?void 0:ec.isMultiSelecting),{locale:em}=(0,i.Vx)(),ev=(0,$.K)(G.updatedAt,em),ep=(0,c.useCallback)(()=>{er(!1)},[]);return(0,r.jsxs)(d.Provider,{value:G,children:[(0,r.jsxs)(M.l,{isHome:A,refToObserve:V,children:[(0,r.jsxs)(T.a.Wrapper,{isHome:A,isHoverByMulti:eu,reference:G.reference,itemRef:K,children:[(0,r.jsx)(ea,{type:O,refMulti:K,children:el?(0,r.jsx)(ex,{videoSrc:null!==(k=null===(m=G.meta)||void 0===m?void 0:m.url)&&void 0!==k?k:"",duration:null===(v=G.meta)||void 0===v?void 0:v.duration,poster:null!==(S=null===(x=G.thumbnail)||void 0===x?void 0:x.url)&&void 0!==S?S:"",name:G.name,height:null!==(_=null===(y=G.thumbnail)||void 0===y?void 0:y.height)&&void 0!==_?_:250}):en?(0,r.jsx)(T.a.FramedImage,{alt:G.name,src:null!==(E=null===(j=G.thumbnail)||void 0===j?void 0:j.url)&&void 0!==E?E:"",width:null!==(P=null===(g=G.thumbnail)||void 0===g?void 0:g.width)&&void 0!==P?P:250,height:null!==(J=null===(w=G.thumbnail)||void 0===w?void 0:w.height)&&void 0!==J?J:250,onErrorImage:ep}):(0,r.jsx)(T.a.BrokenImage,{})}),(0,r.jsxs)(F.a,{children:[(0,r.jsx)(D.z,{}),eo&&(0,r.jsx)(I.b,{checked:ed,hide:!(null==ec?void 0:ec.isSelectMode)&&!es,showHover:!(null==ec?void 0:ec.isMultiSelecting),onChange:()=>{if(!eo||!ec)return;let{hoverFilesReferenceController:e,selectFilesReferenceController:t,selectedItemsRef:n}=ec,{deleteItemReference:r,addItemReference:l}=e,{deleteItemReference:i,addItemReference:s}=t;ed&&eo?(i(G.reference),r(G.reference),K&&n.current.delete(K.current)):(s(G.reference),l(G.reference),K&&n.current.add(K.current))}}),eh&&(0,r.jsx)("div",{className:"$absolute $top-5 $right-5 $block $pointer-events-auto text-neutral-100",children:(0,r.jsx)(o.K,{popoverOrientation:Q,isOpen:X,setIsOpen:ee,children:"all"===O?(0,r.jsx)(et,{hasVideo:el,onActivateRename:()=>q(),location:A?"home":"my_profile",onShowMoveToFolderModal:e=>z(e),isHome:A}):(0,r.jsx)(ei,{})})}),!(null==ec?void 0:ec.isMultiSelecting)&&!el&&(0,r.jsx)("div",{className:"_1y5m5s12 $absolute $bottom-5 $right-5 $gap-5 $flex $flex-row $items-center $justify-center $rounded $px-10 $py-4 $text-white $font-semibold",children:(0,r.jsx)(ef,{origin:G.origin})})]})]}),(0,r.jsx)(N.F.Wrapper,{isFilled:!A,children:U?(0,r.jsx)(N.F.EditName,{defaultValue:G.name,inputRef:H,onBlur:()=>B(),onKeyDown:e=>{"Enter"===e.key&&B()}}):(0,r.jsx)(N.F.Body,{Title:(0,r.jsx)(N.F.Title,{name:G.name,onClickTitle:()=>{window.matchMedia(s.w5.lg).matches&&(q(),Y({interactionType:"title_interaction",location:A?"home":"my_profile",type:"file"}))}}),Description:(0,r.jsx)(N.F.Description,{description:null!==(Z=ev.raw)&&void 0!==Z?Z:L("time.".concat(ev.text),{number:ev.number})})})})]}),W&&(0,r.jsx)("li",{children:(0,r.jsx)(R.P,{name:G.name,reference:G.reference,onShowModal:e=>z(e),showModal:W,type:"file"})})]})}},32490:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var r=n(52983);let l=e=>{let{containerRef:t,threshold:n=0,disconnect:l=!0,rootMargin:i="0px"}=e,[s,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let r=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting),l&&e.isIntersecting&&r.disconnect()})},{threshold:n,rootMargin:i});return r.observe(e),()=>{e&&r.unobserve(e),l&&r.disconnect()}},[t,l,i,n]),s}},11569:function(e,t,n){"use strict";var r=n(97458);t.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M492.9 11.3c-18.4-14.8-43.4-15.1-62.3-.9-40.3 30.6-87.2 74.5-132 123.8-39.8 43.7-74.1 87.3-97.9 124.2-1.2 0-2.3-.1-3.5-.1-36.4 0-67.3 14.7-92 43.7-19.4 22.7-31.5 50.5-40.4 70.7-3.8 8.6-7.3 16.7-10.2 21.5-18.7 31.2-34.6 38-36.2 38.7-9.5 2.6-16.6 10.6-18.1 20.4a25.1 25.1 0 0 0 12.2 25.4C14.9 480 71.4 512 167 512h20c33.4 0 67.5-13.1 93.6-36 28-24.6 43.4-56.8 43.4-90.8 0-8.5-.9-16.9-2.5-25C390.5 277 469 155.4 507.3 71.9c9.8-21.5 4-45.8-14.4-60.6M247.6 438.4c-17.1 15-39.2 23.6-60.6 23.6h-20c-38.3 0-69.2-5.9-91.2-12.1 7-7.9 14.3-17.7 21.7-30 4.5-7.4 8.4-16.5 13.1-27.1 20.3-46.2 40.8-84.5 86.7-84.5 42.4 0 76.8 34.5 76.8 76.8-.1 19.4-9.5 38.3-26.5 53.3m4.8-167.4c9.3-13.5 19.7-27.6 31.1-42 20.3 5 37.7 18.2 48.2 36.3-11.1 15.2-22.1 29.9-33 43.7-12.2-16-28.1-29.1-46.3-38M461.8 51c-22 48-59.2 111.1-99.8 171-12.2-14.4-27.4-26-44.6-33.8C363 135.9 415.9 84.4 460.9 50.3c.2-.1.3-.2.4-.3.3.1.6.4.7.6-.1.1-.1.3-.2.4"})})},27488:function(e,t,n){"use strict";var r=n(97458);t.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M19.802 3.414 18.7.914c-.538-1.219-2.269-1.219-2.806 0l-1.102 2.5a1.53 1.53 0 0 1-.784.784l-2.5 1.102c-1.22.538-1.22 2.269 0 2.806l2.5 1.102c.35.154.63.434.784.784l1.102 2.5c.537 1.22 2.268 1.22 2.806 0l1.102-2.5c.154-.35.434-.63.784-.784l2.5-1.102c1.219-.537 1.219-2.268 0-2.806l-2.5-1.102a1.53 1.53 0 0 1-.784-.784M5.442 9.52l.74 1.678c.103.235.291.423.526.527l1.677.74c.82.36.82 1.522 0 1.883l-1.677.74a1.03 1.03 0 0 0-.527.526l-.74 1.678c-.36.819-1.522.819-1.883 0l-.74-1.678a1.03 1.03 0 0 0-.526-.526l-1.678-.74c-.819-.36-.819-1.523 0-1.884l1.678-.74c.235-.103.423-.291.526-.526l.74-1.678c.36-.818 1.523-.818 1.884 0m8.925 7.574.608 1.382c.086.193.24.348.434.433l1.382.61a.848.848 0 0 1 0 1.55l-1.382.61a.85.85 0 0 0-.434.433l-.608 1.381a.848.848 0 0 1-1.551 0l-.61-1.381a.85.85 0 0 0-.433-.434l-1.381-.609a.848.848 0 0 1 0-1.55l1.381-.61a.85.85 0 0 0 .434-.433l.609-1.382a.848.848 0 0 1 1.55 0z"})})},65122:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(8147);let l=()=>{let e=(0,r.H)();return!!(null==e?void 0:e.permissions.canDownloadResourcePremium)}},19882:function(){},35619:function(){}}]);